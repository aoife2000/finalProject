<!doctype html>
<html>
<head>
<title="Exploring Ireland>
<style>
	canvas {
	border:#333 5px solid;
	width:100%;
	height:100%;
	}
	body {
	padding:0px;
	margin:0px;
	}
</style>
<body>
	<canvas id="canvas"</canvas>
							
</head>
<script>
	var canvas = document.querySelector("#canvas");
	var context = canvas.getContext("2d");
	
	/// store key codes and currently pressed ones
	var keys = {};
    	keys.LEFT = 37;
    	keys.RIGHT = 39;

	

	var img = new Image();
	img.src = "pixie1.jpg";
	img.addEventListener("load", loadImage, false);
	
	function loadImage(e) {
	  animate();
	}

	var shift = 0;
	var frameWidth = 300;
	var frameHeight = 300;
	var totalFrames = 24;
	var currentFrame = 0;

	function animate() {
	  context.clearRect(120, 25, 300, 300);

	  //draw each frame + place them in the middle
	  context.drawImage(img, shift, 0, frameWidth, frameHeight,
			    120, 25, frameWidth, frameHeight);

	  /*
	    Start at the beginning once you've reached the
	    end of your sprite!
	  */
	  if (currentFrame == totalFrames) {
	    shift = 0;
	    currentFrame = 0;
	  }

	  currentFrame++;

	  requestAnimationFrame(animate);
	}
	
	document.body.onkeyup = 
	document.body.onkeydown = function(e){
  	var kc = e.keyCode || e.which;
  	keys[kc] = e.type == 'keydown';
				       
	  var moveImg = function(dx, dy){
	  img.x += dx||0;
	  img.y += dy||0;
	  img.element.style.left = img.x + 'px';
	  img.element.style.top = img.y + 'px';
	};

	/// character control
	var detectImgMovement = function(){
	  if ( keys[keys.LEFT] ) {
	    moveImg(-1);
	  }
	  if ( keys[keys.RIGHT] ) {
	    moveImg(1);
	  }
	};
	/// game loop
	setInterval(function(){
  	detectImgMovement();
	}, 
	1000/24);

</script>
				      
